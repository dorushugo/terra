@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap');

/* Police Nectarine locale */
@font-face {
  font-family: 'Nectarine';
  src: url('/nectarine/Nectarine DEMO.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-size: unset;
    font-weight: unset;
  }

  :root {
    /* TERRA Theme - Light Mode */
    --background: 255 255 255; /* pure white */
    --foreground: 26 26 26; /* urban-black */

    --card: 255 255 255;
    --card-foreground: 26 26 26;

    --popover: 255 255 255;
    --popover-foreground: 26 26 26;

    --primary: #2d5a27; /* terra-green */
    --primary-foreground: 245 245 240;

    --secondary: 156 175 136; /* sage-green */
    --secondary-foreground: 26 26 26;

    --muted: 250 250 250;
    --muted-foreground: 115 115 115;

    --accent: #2d5a27; /* terra-green */
    --accent-foreground: 255 255 255;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 228 228 228;
    --input: 250 250 250;
    --ring: #2d5a27;

    --radius: 0.5rem;

    --success: #2d5a27;
    --warning: #2d5a27;
    --error: 220 38 38;
  }

  [data-theme='dark'] {
    /* TERRA Theme - Dark Mode */
    --background: 26 26 26; /* urban-black */
    --foreground: 255 255 255; /* white */

    --card: 38 38 38;
    --card-foreground: 255 255 255;

    --popover: 38 38 38;
    --popover-foreground: 255 255 255;

    --primary: #2d5a27; /* terra-green */
    --primary-foreground: 255 255 255;

    --secondary: 156 175 136; /* sage-green */
    --secondary-foreground: 26 26 26;

    --muted: 64 64 64;
    --muted-foreground: 163 163 163;

    --accent: #2d5a27; /* terra-green */
    --accent-foreground: 255 255 255;

    --destructive: 220 38 38;
    --destructive-foreground: 255 255 255;

    --border: 64 64 64;
    --input: 38 38 38;
    --ring: #2d5a27;

    --success: #2d5a27;
    --warning: #2d5a27;
    --error: 220 38 38;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-neutral-50 text-foreground min-h-[100vh] flex flex-col;
  }
}

/* Terra brand colors as utilities */
@layer components {
  .bg-terra-green {
    background-color: #2d5a27;
  }

  .text-terra-green {
    color: #2d5a27;
  }

  .border-terra-green {
    border-color: #2d5a27;
  }

  .bg-sage-green {
    background-color: #9caf88;
  }

  .text-sage-green {
    color: #9caf88;
  }

  .bg-urban-black {
    background-color: #1a1a1a;
  }

  .text-urban-black {
    color: #1a1a1a;
  }

  .bg-stone-white {
    background-color: #f5f5f0;
  }

  .text-stone-white {
    color: #f5f5f0;
  }

  .bg-clay-orange {
    background-color: #d4a574;
  }

  .text-clay-orange {
    color: #d4a574;
  }

  /* Fix pour les boutons outline avec texte blanc sur toutes les plateformes */
  .btn-outline-white {
    color: #ffffff !important;
    border-color: rgba(255, 255, 255, 0.6) !important;
    background-color: transparent !important;
  }

  .btn-outline-white:hover {
    background-color: #ffffff !important;
    color: #1a1a1a !important;
  }

  /* Fix spécifique pour le bouton "Notre impact" */
  .terra-hero-outline-btn {
    color: #ffffff !important;
    border-color: rgba(255, 255, 255, 0.6) !important;
    background-color: transparent !important;
  }

  .terra-hero-outline-btn:hover {
    background-color: #ffffff !important;
    color: #1a1a1a !important;
  }

  /* Fix global pour tous les boutons outline - prévient le texte jaune sur Android/Windows */
  button[data-variant='outline'] {
    -webkit-appearance: none !important;
    appearance: none !important;
  }

  /* Force les couleurs correctes pour les boutons outline */
  .outline-btn-fix {
    -webkit-text-fill-color: initial !important;
    -webkit-appearance: none !important;
    appearance: none !important;
  }
}

html {
  opacity: 0;
}

html[data-theme='dark'],
html[data-theme='light'] {
  opacity: initial;
}

/* View Transitions API Styles */
@layer utilities {
  /* Transition pour toute la page */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 300ms;
    animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Transition fade pour le contenu principal */
  ::view-transition-old(main-content) {
    animation: slide-out-left 300ms ease-in-out;
  }

  ::view-transition-new(main-content) {
    animation: slide-in-right 300ms ease-in-out;
  }

  /* Transition spéciale pour les cartes produit */
  ::view-transition-old(product-card) {
    animation: scale-out 250ms ease-in-out;
  }

  ::view-transition-new(product-card) {
    animation: scale-in 250ms ease-in-out;
  }

  /* Transition pour les images de produits */
  ::view-transition-old(product-image) {
    animation: zoom-out 400ms ease-in-out;
  }

  ::view-transition-new(product-image) {
    animation: zoom-in 400ms ease-in-out;
  }

  /* Animations personnalisées */
  @keyframes slide-out-left {
    to {
      transform: translateX(-100%);
      opacity: 0;
    }
  }

  @keyframes slide-in-right {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes scale-out {
    to {
      transform: scale(0.9);
      opacity: 0;
    }
  }

  @keyframes scale-in {
    from {
      transform: scale(1.1);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes zoom-out {
    to {
      transform: scale(0.8);
      opacity: 0;
    }
  }

  @keyframes zoom-in {
    from {
      transform: scale(1.2);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Transition pour les éléments partagés */
  .shared-element {
    view-transition-name: var(--transition-name);
  }

  /* Optimisations performance */
  .transition-terra-safe {
    transition-property: transform, opacity, background-color, border-color, color, fill, stroke;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, opacity;
  }

  .transition-terra-smooth {
    transition-property: all;
    transition-duration: 300ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Loading states pour les transitions */
  .loading-skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading-shimmer 2s infinite;
  }

  @keyframes loading-shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Hover optimisé */
  .hover-lift {
    transition:
      transform 200ms ease-out,
      box-shadow 200ms ease-out;
  }

  .hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  /* Animations d'entrée de page modernes */
  .page-enter {
    animation: pageEnter 800ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(24px);
  }

  .hero-enter {
    animation: heroEnter 1000ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(32px) scale(0.98);
  }

  .content-enter {
    animation: contentEnter 600ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(20px);
  }

  .card-enter {
    animation: cardEnter 500ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(16px) scale(0.96);
  }

  .stagger-1 {
    animation-delay: 100ms;
  }
  .stagger-2 {
    animation-delay: 200ms;
  }
  .stagger-3 {
    animation-delay: 300ms;
  }
  .stagger-4 {
    animation-delay: 400ms;
  }
  .stagger-5 {
    animation-delay: 500ms;
  }
  .stagger-6 {
    animation-delay: 600ms;
  }

  /* Animations pour les grilles de produits */
  .grid-enter {
    animation: gridEnter 600ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(12px);
  }

  .grid-stagger-1 {
    animation-delay: 50ms;
  }
  .grid-stagger-2 {
    animation-delay: 100ms;
  }
  .grid-stagger-3 {
    animation-delay: 150ms;
  }
  .grid-stagger-4 {
    animation-delay: 200ms;
  }
  .grid-stagger-5 {
    animation-delay: 250ms;
  }
  .grid-stagger-6 {
    animation-delay: 300ms;
  }

  @keyframes pageEnter {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes heroEnter {
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes contentEnter {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes cardEnter {
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes gridEnter {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Animation pour les éléments qui apparaissent au scroll */
  .reveal-on-scroll {
    opacity: 0;
    transform: translateY(24px);
    transition: all 600ms cubic-bezier(0.16, 1, 0.3, 1);
  }

  .reveal-on-scroll.revealed {
    opacity: 1;
    transform: translateY(0);
  }

  /* Animation subtile pour les textes */
  .text-reveal {
    animation: textReveal 800ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(12px);
  }

  @keyframes textReveal {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Préférences de mouvement réduit */
  @media (prefers-reduced-motion: reduce) {
    .page-enter,
    .hero-enter,
    .content-enter,
    .card-enter,
    .grid-enter,
    .text-reveal {
      animation: none;
      opacity: 1;
      transform: none;
    }

    .reveal-on-scroll {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
}
